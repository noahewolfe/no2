<html>

  <head>

    <title>NO2</title>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  </head>

  <body>

    <script>
      function drawGraph() {
        var fileInput = document.getElementById("data");
        var csvFile = fileInput.files[0];
        //console.log(fileInput.files);

        Plotly.d3.csv(csvFile, function(rows) {
          var trace = {
            type: "scatter",
            mode: "lines",
            x: rows.map(function(row) {
              return row['Time']
            }),
            y: rows.map(function(row) {
              return row['Concentration(ppb)']
            }),
            line: {
              width: 1
            }
          };

          var layout = {
            yaxis: {title: "NO2 Concentration"},
            xaxis: {
              showgrid: false
            }
          }

          Plotly.plot(document.getElementById("tester"), [trace], layout, {showLink: false});

        });
      }
    </script>

    <form action="javascript:drawGraph();">
      <input id="data" type="file" accept=".csv">
      <input type="submit">
    </form>

    <div id="tester" style="width:600px;height:250px;"></div>
    <!--<script>
    	TESTER = document.getElementById('tester');
    	Plotly.plot( TESTER, [{
    	x: [1, 2, 3, 4, 5],
    	y: [1, 2, 4, 8, 16] }], {
    	margin: { t: 0 } } );
    </script>-->

  </body>

</html>
